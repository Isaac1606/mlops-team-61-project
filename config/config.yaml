# Configuration file for Bike Sharing Demand Prediction Project
# This file centralizes all configuration parameters for reproducibility

# Project metadata
project_name: "bike_sharing_demand"
version: "0.1.0"
author: "Team 61"
description: "MLOps project for predicting hourly bike rental demand"

# Data configuration
data:
  raw_dir: "data/raw"
  interim_dir: "data/interim"
  processed_dir: "data/processed"
  raw_filename: "bike_sharing_modified.csv"
  clean_filename: "bike_sharing_clean.csv"
  
  # Train/validation/test splits (temporal, in order)
  train_split: 0.70
  val_split: 0.15
  test_split: 0.15
  
  # Target variable
  target_col: "cnt"
  
  # Columns to exclude (metadata + leakage columns)
  exclude_cols:
    - "timestamp"
    - "dteday"
    - "cnt"
    - "cnt_transformed"
    - "casual"
    - "registered"
    - "instant"

# Feature engineering configuration
features:
  base_year: 2011
  # Lag features (hours)
  lag_features: [1, 24, 48, 72, 168]

  # Columns that must remain in feature matrices to preserve temporal context
  context_columns:
    - "dteday"
  
  # Rolling window features (hours)
  rolling_windows: [3, 24, 72]
  
  # Cyclical encoding
  cyclical_features:
    - "hr"
    - "mnth"
    - "weekday"
  
  # Interaction features
  interactions:
    - ["hr", "workingday"]
    - ["temp", "hum"]
    - ["temp", "windspeed"]
  
  # Advanced features
  advanced_features:
    volatility: true
    historical_context: true
    momentum: true
    weather_interactions: true

# Preprocessing configuration
preprocessing:
  # Scaling method: "standard", "robust", "minmax", "none"
  scaler_type: "robust"
  
  # Features to exclude from scaling (binary, one-hot encoded)
  exclude_from_scaling:
    - "holiday"
    - "workingday"
    - "season_"
    - "weathersit_"
    - "weather_quadrant_"
    - "is_peak_hour"
    - "is_commute_window"

# Model configuration
models:
  # Base models
  ridge:
    alpha: 10.0
    max_iter: 10000
    random_state: 42
  
  random_forest:
    n_estimators: 200
    max_depth: 15
    min_samples_split: 10
    min_samples_leaf: 5
    max_features: 0.3
    bootstrap: true
    oob_score: true
    max_samples: 0.8
    random_state: 42
    n_jobs: -1
  
  xgboost:
    n_estimators: 300
    max_depth: 4
    learning_rate: 0.03
    subsample: 0.7
    colsample_bytree: 0.7
    colsample_bylevel: 0.7
    min_child_weight: 5
    gamma: 0.5
    reg_alpha: 0.5
    reg_lambda: 2.0
    random_state: 42
    n_jobs: -1
    tree_method: "hist"
    eval_metric: "rmse"
    early_stopping_rounds: 50

# Hyperparameter tuning
tuning:
  enabled: false  # Set to true to enable GridSearch/RandomSearch
  method: "grid"  # "grid" or "random"
  cv_folds: 5
  scoring: "neg_mean_squared_error"
  
  # Grid search parameters (if method == "grid")
  rf_grid:
    n_estimators: [100, 150, 200]
    max_depth: [10, 15, 20]
    min_samples_split: [10, 15, 20]
    min_samples_leaf: [5, 10]
    max_features: [0.3, 0.4, "sqrt"]

# Evaluation metrics
evaluation:
  metrics:
    - "mae"
    - "rmse"
    - "r2"
    - "mape"
  
  target_metrics:
    mae: 100
    rmse: 140
    r2: 0.65
    mape: 35

# MLflow configuration
mlflow:
  tracking_uri: "file:///mlruns"  # Relative to project root
  experiment_name: "bike-sharing-demand-baseline"
  registry_enabled: true
  
  # Tags for all experiments
  tags:
    project: "mlops-team-61"
    phase: "baseline-models"
    dataset: "bike-sharing"

# DVC configuration
dvc:
  remote: "raw"
  profile: "MLOpsTeamMemberUser"
  
  # Files to track
  track_data: true
  track_models: true
  track_config: false

# Paths
paths:
  models_dir: "models"
  reports_dir: "reports"
  figures_dir: "reports/figures"
  mlruns_dir: "mlruns"

# Reproducibility
reproducibility:
  seed: 42
  n_jobs: -1
  verbosity: 1

